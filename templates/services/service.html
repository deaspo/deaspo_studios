{% extends "base.html" %}
{% load staticfiles %}
{% block addStyles %}
    <<link rel="stylesheet" type="text/css" href="{% static 'css/service_page.css' %}">
    <link rel="stylesheet" href="{% static 'services/service/css/custom.css' %}">
{% endblock addStyles %}
{% block pageTitle %} {{ service.pname }} {% endblock pageTitle %}
{% block pageHead %} {{ service.pintro }} {% endblock %}

{% block pageContent %}
    <div class="row margin-b-30">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="box bottom-main">
                <div style="padding-top: 30px; padding-bottom: 30px;background: #eee;" class="container-fluid">
                    <div class="wrapper row">
                        <div class="preview col-md-6">

                            <div class="preview-pic tab-content">
                              <div class="tab-pane active" id="pic-1"><img src="{{ service.ppics.url }}" /></div>
                                <header class="template_header">
                                    <h1 class="text-center">Our Plans</h1>
                                </header>
                                <div style="background-color: #d17b6e;" class="col-sm-12 text-center" id="price">
                                    {% for serv in service.plan.all %}
                                        <div style="font-size: 8px;padding: 2px;" class="col-md-4 col-sm-6">
                                            <div class="plan wow bounceIn" data-wow-delay="0.9s">
                                                <div class="plan_title">
                                                    <h3 style="font-size: 11px;">{{ serv.pn_name }}</h3>
                                                </div>
                                                <div class="plan_sub_title">
                                                    <h2 style="font-size: 10px;">Kshs {{ serv.pn_yearly }}</h2>
                                                    <small>per year</small> </div>
                                                <ul>
                                                    <li>{{ serv.pn_transfer }} Transfers</li>
                                                    <li>{{ serv.SSD }} SSD GB SPACE</li>
                                                    <li>{{ serv.RAM }} of RAM</li>
                                                    <li>{{ serv.CPU }} CPU</li>
                                                </ul>
                                                    <a style="background: #ff9f1a;" class="add-to-cart btn btn-default" href="{% url 'check' service.id serv.id %}">add to cart</a>

                                            </div>
                                        </div>

                                    {% endfor %}
                                </div>
                                <div class="col-xs-12 col-md-6 text-center">
                                    <h1 class="rating-num">{% if service.comments.count %}
                                    {% for comment in service.comments.all %}

                                    {% endfor %}

                                    {% endif %}
                                        </h1><!-- to add later -->
                                    <div class="rating">
                                        <span class="fa fa-user review-no">&nbsp {{ service.comments.count }} &nbsp reviews</span>
                                    </div>
                                </div>
                            <div class="col-sm-3">
                                <h4 style="font-size: 9px;">Rating breakdown</h4>
                                <div class="pull-left">
                                    <div class="pull-left" style="width:35px; line-height:1;">
                                        <div style="height:1px; margin:5px 0;">5 <span class="fa fa-star"></span></div>
                                    </div>
                                    <div class="pull-left" style="width:180px;">
                                        <div class="progress" style="height:3px; margin:8px 0;">
                                          <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="5" style="width: 100%">
                                            <span class="sr-only">80% Complete (danger)</span>
                                          </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pull-left">
                                    <div class="pull-left" style="width:35px; line-height:1;">
                                        <div style="height:1px; margin:5px 0;">4 <span class="fa fa-star"></span></div>
                                    </div>
                                    <div class="pull-left" style="width:180px;">
                                        <div class="progress" style="height:3px; margin:8px 0;">
                                          <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="4" aria-valuemin="0" aria-valuemax="5" style="width: 80%">
                                            <span class="sr-only">80% Complete (danger)</span>
                                          </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pull-left">
                                    <div class="pull-left" style="width:35px; line-height:1;">
                                        <div style="height:1px; margin:5px 0;">3 <span class="fa fa-star"></span></div>
                                    </div>
                                    <div class="pull-left" style="width:180px;">
                                        <div class="progress" style="height:3px; margin:8px 0;">
                                          <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="3" aria-valuemin="0" aria-valuemax="5" style="width: 60%">
                                            <span class="sr-only">80% Complete (danger)</span>
                                          </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pull-left">
                                    <div class="pull-left" style="width:35px; line-height:1;">
                                        <div style="height:1px; margin:5px 0;">2 <span class="fa fa-star"></span></div>
                                    </div>
                                    <div class="pull-left" style="width:180px;">
                                        <div class="progress" style="height:3px; margin:8px 0;">
                                          <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="5" style="width: 40%">
                                            <span class="sr-only">80% Complete (danger)</span>
                                          </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pull-left">
                                    <div class="pull-left" style="width:35px; line-height:1;">
                                        <div style="height:1px; margin:5px 0;">1 <span class="fa fa-star"></span></div>
                                    </div>
                                    <div class="pull-left" style="width:180px;">
                                        <div class="progress" style="height:3px; margin:8px 0;">
                                          <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="5" style="width: 20%">
                                            <span class="sr-only">80% Complete (danger)</span>
                                          </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                            <ul class="preview-thumbnail nav nav-tabs">
                              <li class="active"><a data-target="#pic-1" data-toggle="tab"><img src="{{ service.ppics.url }}" /></a></li>
                            </ul>
                        </div>
                        <div class="details col-md-6">
                            <div class="col-sm-12 london-title">
                                 <h3 class="text-uppercase">{{ service.pname }}</h3>
                                 <h4 class="text-uppercase">{{ service.pintro }}</h4>
                            </div>
                            <h2 class="text-left"> Product Description </h2>
                            <p class="product-description">{{ service.pdesc }}</p>
                            <p class="vote"><strong>91%</strong> of buyers enjoyed this product! <strong><span class="like fa fa-heart"></span></strong></p>
                        </div>
                    </div>
                    <div class="review-block">
                        <h2 class="text-left"> Product Reviews </h2>
                        {% for comment in service.comments.all %}
                            <div class="row">
                                <div class="col-sm-3">
                                        <img src="{{ comment.pic.url }}" height="50%" width="50%" class="img-rounded">
                                        <div class="review-block-name"><a href="#">{{ comment.user }}</a></div>
                                        <div class="review-block-date">Posted<br/>{{ comment.posted }}</div>
                                </div>
                                <div class="col-sm-9">
                                        <div class="review-block-title">{{ comment.title }}</div>
                                        <div class="review-block-description">{{ comment.body }}</div>
                                </div>
                                <div class="pull-left" style="width:35px; line-height:1;">
                                    <div style="height:9px; margin:5px 0;">{{ comment.rating }} <span class="fa fa-star checked"></span></div>
                                </div>
                                <div class="pull-left" style="width:180px;">
                                    <div class="progress" style="height:9px; margin:8px 0;">
                                        <div class="{% if comment.rating == 5 %}
                                                    progress-bar progress-bar-success
                                                 {% elif comment.rating == 4 %}
                                                    progress-bar progress-bar-primary
                                                {% elif comment.rating == 3 %}
                                                    progress-bar progress-bar-info
                                                {% elif comment.rating == 2 %}
                                                    progress-bar progress-bar-warning
                                                {% elif comment.rating == 1 %}
                                                    progress-bar progress-bar-danger
                                                {% else %}
                                                progress-bar
                                                   {% endif %}" role="progressbar" aria-valuenow="{{ comment.rating }}" aria-valuemin="0" aria-valuemax="5" style="{% if comment.rating == 5 %}
                                            width: 100%;
                                            {% elif comment.rating == 4 %}
                                                width: 80%;
                                            {% elif comment.rating == 3 %}
                                                width: 60%;
                                            {% elif comment.rating == 2 %}
                                                width: 40%;
                                            {% elif comment.rating == 1 %}
                                                width: 20%;
                                            {% else %}
                                                width: 0%;
                                        {% endif %}">
                                            <span class="sr-only">80% Complete (danger)</span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        {% empty %}
                            <h3 class="text-left"> No reviews, be the first </h3>
                        {% endfor %}

                        <hr/>
                    </div>
                    <div class="row" style="margin-top:40px;">

                        <div class="col-md-12">
                        <div class="well well-sm">
                            <div class="text-right">
                                <a class="btn btn-success btn-green" id="open-review-box">Leave a Review</a>
                            </div>

                            <div class="row" id="post-review-box" style="display:none;">
                                <div class="col-md-12">
                                    <form accept-charset="UTF-8" action="" method="post" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        {{ form }}
                                        <input type="hidden" name="form-type" value="review-form" /> <!-- set type -->
                                        <!--<input id="ratings-hidden" name="rating" type="hidden">
                                        <textarea class="form-control animated" cols="50" id="new-review" name="comment" placeholder="Enter your review here..." rows="5"></textarea>-->

                                        <div class="text-right">
                                            <div class="stars starrr" data-rating="0"><p style="color: black;">Don't forget to rate this product!</p></div>
                                            <a class="btn btn-danger btn-sm" href="#" id="close-review-box" style="display:none; margin-right: 10px;">
                                            <span class="fa fa-remove"></span>Cancel</a>
                                            <button class="btn btn-success btn-lg" type="submit">Save</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- row -->
{% endblock pageContent %}

{% block addScripts %}
    <script src="{% static 'services/service/js/custom.js' %}"></script>
{% endblock addScripts %}